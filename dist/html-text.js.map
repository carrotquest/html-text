{"version":3,"file":"html-text.js","sources":["../src/index.js"],"sourcesContent":["import { Sprite } from '@pixi/sprite';\nimport { settings } from '@pixi/settings';\nimport { Texture } from '@pixi/core';\nimport { Rectangle } from '@pixi/math';\nimport { trimCanvas, sign, hex2rgb, hex2string } from '@pixi/utils';\nimport { TextStyle } from '@pixi/text';\n\n/**\n * Text display object that support multi-style HTML text\n * @class\n * @memberof PIXI\n * @extends PIXI.Sprite\n * @see {@link https://pixijs.download/dev/docs/PIXI.Sprite.html PIXI.Sprite}\n * @see {@link https://pixijs.download/dev/docs/PIXI.TextStyle.html PIXI.TextStyle}\n */\nexport class HTMLText extends Sprite\n{\n    /**\n     * @constructor\n     * @param {string} [text] - Text contents\n     * @param {PIXI.TextStyle} [style] - Style settings, not all TextStyle options are supported.\n     * @param {HTMLCanvasElement} [canvas] - Optional canvas to use for rendering.\n     *.       if undefined, will generate it's own canvas using createElement.\n     * @param {object<string, string>} [cssStyle] - CSS Style settings for HTML elements in text\n     *        Where key is selector, value is styles\n     */\n    constructor(text = '', style = {}, canvas, cssStyle = {})\n    {\n        canvas = canvas || document.createElement('canvas');\n\n        canvas.width = 3;\n        canvas.height = 3;\n\n        const texture = Texture.from(canvas, { scaleMode: settings.SCALE_MODE });\n\n        texture.orig = new Rectangle();\n        texture.trim = new Rectangle();\n\n        super(texture);\n\n        const ns = 'http://www.w3.org/2000/svg';\n        const svgRoot = document.createElementNS(ns, 'svg');\n        const foreignObject = document.createElementNS(ns, 'foreignObject');\n        const domElement = document.createElementNS('http://www.w3.org/1999/xhtml', 'div');\n        domElement.classList.add('pixi-html_text');\n\n        foreignObject.setAttribute('height', '100%');\n        foreignObject.setAttribute('width', '100%');\n        svgRoot.appendChild(foreignObject);\n\n        this._domElement = domElement;\n        this._svgRoot = svgRoot;\n        this._foreignObject = foreignObject;\n        this._image = new Image();\n\n        this.canvas = canvas;\n        this.context = this.canvas.getContext('2d');\n        this._resolution = settings.RESOLUTION;\n        this._autoResolution = true;\n        this._text = null;\n        this._style = null;\n        this._cssStyle = null;\n        this._loading = false;\n        this.text = text;\n        this.style = style;\n        this.cssStyle = cssStyle;\n        this.localStyleID = -1;\n    }\n\n    /**\n     * Manually refresh the text.\n     * @public\n     * @param {boolean} [respectDirty=true] - Whether to abort updating the\n     *        text if the Text isn't dirty and the function is called.\n     */\n    updateText(respectDirty)\n    {\n        const { style, canvas, context, resolution } = this;\n\n        // check if style has changed..\n        if (this.localStyleID !== style.styleID)\n        {\n            this.dirty = true;\n            this.localStyleID = style.styleID;\n        }\n\n        if (!this.dirty && respectDirty)\n        {\n            return;\n        }\n\n        let css = `\n            display:inline-block;\n            color:${style.fill};\n            font-size: ${style.fontSize}px;\n            font-family:${style.fontFamily};\n            font-weight:${style.fontWeight};\n            font-style:${style.fontStyle};\n            font-variant:${style.fontVariant};\n            letter-spacing:${style.letterSpacing}px;\n            text-align:${style.align};\n            padding:${style.padding}px;\n        `;\n\n        if (style.lineHeight)\n        {\n            css += `line-height:${style.lineHeight}px;`;\n        }\n\n        if (style.wordWrap)\n        {\n            css += `word-wrap:${style.breakWords ? 'break-all' : 'break-word'};`;\n            css += `width:${style.wordWrapWidth}px;`;\n        }\n\n        if (style.strokeThickness)\n        {\n            let { stroke } = style;\n\n            if (typeof color === 'number')\n            {\n                stroke = hex2string(stroke);\n            }\n\n            css += `-webkit-text-stroke-width: ${style.strokeThickness}px;`;\n            css += `-webkit-text-stroke-color: ${stroke};`;\n            css += `text-stroke-width: ${style.strokeThickness}px;`;\n            css += `text-stroke-color: ${stroke};`;\n            css += 'paint-order: stroke;';\n        }\n\n        if (style.dropShadow)\n        {\n            const { dropShadowAngle, dropShadowDistance, dropShadowBlur, dropShadowColor, dropShadowAlpha } = style;\n            const x = Math.round(Math.cos(dropShadowAngle) * dropShadowDistance);\n            const y = Math.round(Math.sin(dropShadowAngle) * dropShadowDistance);\n            let color = dropShadowColor;\n\n            // Convert numbers to hex strings\n            if (typeof color === 'number')\n            {\n                color = hex2string(color);\n            }\n\n            // Check if we should apply alpha\n            if (color.charAt(0) === '#' && dropShadowAlpha < 1)\n            {\n                const [r, g, b] = hex2rgb(parseInt(color.replace('#', ''), 16));\n\n                color = `rgba(${r * 255 | 0}, ${g * 255 | 0}, ${b * 255 | 0}, ${dropShadowAlpha})`;\n            }\n\n            css += `text-shadow: ${x}px ${y}px ${dropShadowBlur}px ${color};`;\n        }\n\n        const dom = this._domElement;\n\n        Object.assign(dom, {\n            innerHTML: this._text,\n            style: css,\n        });\n\n        // Measure the contents\n        document.body.appendChild(dom);\n        const { width, height } = dom.getBoundingClientRect();\n\n        document.body.removeChild(dom);\n\n        // Assemble the svg output\n        this._foreignObject.appendChild(dom);\n\n        const cssStyleEl = document.createElement('style');\n\n        cssStyleEl.innerHTML = this.stringCssStyle;\n        this._foreignObject.insertAdjacentElement('afterbegin', cssStyleEl);\n\n        this._svgRoot.setAttribute('width', width);\n        this._svgRoot.setAttribute('height', height);\n\n        canvas.width = Math.ceil((Math.max(1, width) + (style.padding * 2)) * resolution);\n        canvas.height = Math.ceil((Math.max(1, height) + (style.padding * 2)) * resolution);\n\n        if (!this._loading)\n        {\n            const image = this._image;\n            const svgURL = new XMLSerializer().serializeToString(this._svgRoot);\n\n            this._loading = true;\n            image.src = `data:image/svg+xml;charset=utf8,${encodeURIComponent(svgURL)}`;\n            image.onload = () =>\n            {\n                context.scale(resolution, resolution);\n                context.clearRect(0, 0, canvas.width, canvas.height);\n                context.drawImage(\n                    image,\n                    0, 0, width, height,\n                    0, 0, width, height,\n                );\n                image.src = '';\n                image.onload = undefined;\n                this._loading = false;\n                this.updateTexture();\n            };\n        }\n    }\n\n    get stringCssStyle()\n    {\n        let css = '';\n\n        for (const k in this._cssStyle)\n        {\n            css += `.pixi-html_text ${k} {${this._cssStyle[k]}}`;\n        }\n\n        return css;\n    }\n\n    /**\n     * Update the texture resource.\n     * @private\n     */\n    updateTexture()\n    {\n        const { canvas, context, style, texture, resolution } = this;\n\n        if (style.trim)\n        {\n            const { width, height, data } = trimCanvas(canvas);\n\n            if (data)\n            {\n                canvas.width = width;\n                canvas.height = height;\n                context.putImageData(data, 0, 0);\n            }\n        }\n\n        const padding = style.trim ? 0 : style.padding;\n        const baseTexture = texture.baseTexture;\n\n        texture.trim.width = texture._frame.width = Math.ceil(canvas.width / resolution);\n        texture.trim.height = texture._frame.height = Math.ceil(canvas.height / resolution);\n        texture.trim.x = -padding;\n        texture.trim.y = -padding;\n\n        texture.orig.width = texture._frame.width - (padding * 2);\n        texture.orig.height = texture._frame.height - (padding * 2);\n\n        // call sprite onTextureUpdate to update scale if _width or _height were set\n        this._onTextureUpdate();\n\n        baseTexture.setRealSize(canvas.width, canvas.height, resolution);\n\n        this.dirty = false;\n    }\n\n    /**\n     * Renders the object using the WebGL renderer\n     *\n     * @param {PIXI.Renderer} renderer - The renderer\n     * @private\n     */\n    _render(renderer)\n    {\n        if (this._autoResolution && this._resolution !== renderer.resolution)\n        {\n            this._resolution = renderer.resolution;\n            this.dirty = true;\n        }\n\n        this.updateText(true);\n\n        super._render(renderer);\n    }\n\n    /**\n     * Renders the object using the Canvas Renderer.\n     *\n     * @private\n     * @param {PIXI.CanvasRenderer} renderer - The renderer\n     */\n    _renderCanvas(renderer)\n    {\n        if (this._autoResolution && this._resolution !== renderer.resolution)\n        {\n            this._resolution = renderer.resolution;\n            this.dirty = true;\n        }\n\n        this.updateText(true);\n\n        super._renderCanvas(renderer);\n    }\n\n    /**\n     * Get the local bounds.\n     *\n     * @param {PIXI.Rectangle} [rect]\n     * @return {PIXI.Rectangle} Local bounds\n     */\n    getLocalBounds(rect)\n    {\n        this.updateText(true);\n\n        return super.getLocalBounds(rect);\n    }\n\n    _calculateBounds()\n    {\n        this.updateText(true);\n        this.calculateVertices();\n        // if we have already done this on THIS frame.\n        this._bounds.addQuad(this.vertexData);\n    }\n\n    /**\n     * Handle dirty style changes\n     * @private\n     */\n    _onStyleChange()\n    {\n        this.dirty = true;\n    }\n\n    /**\n     * Destroy this Text object. Don't use after calling.\n     * @param {boolean|object} [options=true] Same as Sprite destroy options.\n     */\n    destroy(options = true)\n    {\n        super.destroy(options);\n\n        // make sure to reset the the context and canvas..\n        // dont want this hanging around in memory!\n        this.context = null;\n        this.canvas.width = this.canvas.height = 0; // Safari hack\n        this.canvas = null;\n        this._style = null;\n        this._cssStyle = null;\n        this._svgRoot = null;\n        this._domElement = null;\n        this._foreignObject = null;\n        this._image.onload = null;\n        this._image.src = '';\n        this._image = null;\n    }\n\n    /**\n     * Get the width in pixels.\n     * @member {number}\n     */\n    get width()\n    {\n        this.updateText(true);\n\n        return Math.abs(this.scale.x) * this.canvas.width / this.resolution;\n    }\n\n    set width(value) // eslint-disable-line require-jsdoc\n    {\n        this.updateText(true);\n\n        const s = sign(this.scale.x) || 1;\n\n        this.scale.x = s * value / this.canvas.width / this.resolution;\n        this._width = value;\n    }\n\n    /**\n     * Get the height in pixels.\n     * @member {number}\n     */\n    get height()\n    {\n        this.updateText(true);\n\n        return Math.abs(this.scale.y) * this.canvas.height / this.resolution;\n    }\n\n    set height(value) // eslint-disable-line require-jsdoc\n    {\n        this.updateText(true);\n\n        const s = sign(this.scale.y) || 1;\n\n        this.scale.y = s * value / this.canvas.height / this.resolution;\n        this._height = value;\n    }\n\n    /**\n     * The base style to render with text.\n     * @member {PIXI.Style|object}\n     */\n    get style()\n    {\n        return this._style;\n    }\n\n    set style(style) // eslint-disable-line require-jsdoc\n    {\n        style = style || {};\n\n        if (style instanceof TextStyle)\n        {\n            this._style = style;\n        }\n        else\n        {\n            this._style = new TextStyle(style);\n        }\n\n        this.localStyleID = -1;\n        this.dirty = true;\n    }\n\n    /**\n     * The CSS style to render with text.\n     * @member {string}\n     */\n    get cssStyle()\n    {\n        return this._cssStyle;\n    }\n\n    set cssStyle(style) // eslint-disable-line require-jsdoc\n    {\n        this._cssStyle = style || {};\n        this.dirty = true;\n    }\n\n    /**\n     * Contents of text. This can be HTML text.\n     * @member {string}\n     */\n    get text()\n    {\n        return this._text;\n    }\n\n    set text(text) // eslint-disable-line require-jsdoc\n    {\n        text = String(text === '' || text === null || text === undefined ? ' ' : text);\n        text = this.sanitiseText(text);\n\n        if (this._text === text)\n        {\n            return;\n        }\n        this._text = text;\n        this.dirty = true;\n    }\n\n    /**\n     * The resolution / device pixel ratio of the canvas.\n     * This is set to automatically match the renderer resolution by default, but can be overridden by setting manually.\n     * @member {number}\n     * @default 1\n     */\n    get resolution()\n    {\n        return this._resolution;\n    }\n\n    set resolution(value) // eslint-disable-line require-jsdoc\n    {\n        this._autoResolution = false;\n\n        if (this._resolution === value)\n        {\n            return;\n        }\n\n        this._resolution = value;\n        this.dirty = true;\n    }\n\n    sanitiseText(text)\n    {\n        // Sanitise text - replace <br> with <br/>, &nbsp; with &#160;\n        // See discussion here:\n        // https://www.sitepoint.com/community/t/xhtml-1-0-transitional-xml-parsing-error-entity-nbsp-not-defined/3392/3\n        return text\n            .replace(/<br>/gi, '<br/>')\n            .replace(/<hr>/gi, '<hr/>')\n            .replace(/&nbsp;/gi, '&#160;');\n    }\n}\n"],"names":["HTMLText","text","style","canvas","cssStyle","document","createElement","width","height","const","texture","Texture","from","scaleMode","settings","SCALE_MODE","orig","Rectangle","trim","super","ns","svgRoot","createElementNS","foreignObject","domElement","classList","add","setAttribute","appendChild","this","_domElement","_svgRoot","_foreignObject","_image","Image","context","getContext","_resolution","RESOLUTION","_autoResolution","_text","_style","_cssStyle","_loading","localStyleID","updateText","respectDirty","styleID","dirty","let","css","lineHeight","wordWrap","breakWords","strokeThickness","color","stroke","hex2string","dropShadow","x","Math","round","cos","dropShadowAngle","dropShadowDistance","y","sin","dropShadowColor","charAt","dropShadowAlpha","hex2rgb","parseInt","replace","dropShadowBlur","dom","Object","assign","innerHTML","body","getBoundingClientRect","removeChild","cssStyleEl","stringCssStyle","insertAdjacentElement","ceil","max","padding","resolution","image","svgURL","XMLSerializer","serializeToString","src","encodeURIComponent","onload","scale","clearRect","drawImage","undefined","updateTexture","prototypeAccessors","k","trimCanvas","data","putImageData","baseTexture","_frame","_onTextureUpdate","setRealSize","_render","renderer","_renderCanvas","getLocalBounds","rect","_calculateBounds","calculateVertices","_bounds","addQuad","vertexData","_onStyleChange","destroy","options","abs","value","s","sign","_width","_height","TextStyle","String","sanitiseText","Sprite"],"mappings":"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"}